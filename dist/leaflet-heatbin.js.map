{"version":3,"file":"leaflet-heatbin.js","sources":["../src/L.HeatBin.js"],"sourcesContent":["\nimport h337 from 'heatmap.js';\nimport turf from 'turf';\n\nconst HeatBin = (L.Layer ? L.Layer : L.Class).extend({\n\n\tinitialize: function (config) {\n\t\tthis.cfg = config;\n\t\tthis._el = L.DomUtil.create('div', 'leaflet-zoom-hide');\n\t\tthis._data = [];\n\t\tthis._max = 1;\n\t\tthis._min = 0;\n\t\tthis.cfg.container = this._el;\n\t},\n\n\tonAdd: function (map) {\n\t\tvar size = map.getSize();\n\n\t\tthis._map = map;\n\n\t\tthis._width = size.x;\n\t\tthis._height = size.y;\n\n\t\tthis._el.style.width = size.x + 'px';\n\t\tthis._el.style.height = size.y + 'px';\n\t\tthis._el.style.position = 'absolute';\n\n\t\tthis._origin = this._map.layerPointToLatLng(new L.Point(0, 0));\n\n\t\tmap.getPanes().overlayPane.appendChild(this._el);\n\n\t\tif (!this._heatmap) {\n\t\t\tthis._heatmap = h337.create(this.cfg);\n\t\t}\n\n\t\t// this resets the origin and redraws whenever\n\t\t// the zoom changed or the map has been moved\n\t\tmap.on('moveend', this._reset, this);\n\t\tthis._draw();\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\n\tonRemove: function (map) {\n\t\t// remove layer's DOM elements and listeners\n\t\tmap.getPanes().overlayPane.removeChild(this._el);\n\n\t\tmap.off('moveend', this._reset, this);\n\t},\n\n\t_draw: function() {\n\t\tif (!this._map) { return; }\n\n\t\tvar mapPane = this._map.getPanes().mapPane;\n\t\tvar point = mapPane._leaflet_pos;\n\n\t\t// reposition the layer\n\t\tthis._el.style[HeatBin.CSS_TRANSFORM] = 'translate(' +\n\t\t\t-Math.round(point.x) + 'px,' +\n\t\t\t-Math.round(point.y) + 'px)';\n\n\t\tthis._update();\n\t},\n\n\t_getPixelRadius: function () {\n\n\t\tvar centerLatLng = this._map.getCenter();\n\t\tvar pointC = this._map.latLngToContainerPoint(centerLatLng);\n\t\tvar pointX = [pointC.x + 1, pointC.y];\n\n\t\t// convert containerpoints to latlng's\n\t\tvar latLngC = this._map.containerPointToLatLng(pointC);\n\t\tvar latLngX = this._map.containerPointToLatLng(pointX);\n\n\t\t// Assuming distance only depends on latitude\n\t\tvar distanceX = latLngC.distanceTo(latLngX);\n\t\t// 100 meters is the fixed distance here\n\t\tvar pixels = this.cfg.radiusMeters / distanceX;\n\n\t\treturn pixels >= 1 ? pixels : 1;\n\t},\n\n\t_update: function() {\n\n\t\tvar bounds, zoom, scale;\n\t\tvar generatedData = { max: this._max, min: this._min, data: [] };\n\n\t\tbounds = this._map.getBounds();\n\t\tzoom = this._map.getZoom();\n\t\tscale = Math.pow(2, zoom);\n\n\t\tif (this._data.length == 0) {\n\t\t\tif (this._heatmap) {\n\t\t\t\tthis._heatmap.setData(generatedData);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tvar latLngPoints = [];\n\t\tvar radiusMultiplier = this.cfg.scaleRadius ? scale : 1;\n\t\tvar localMax = 0;\n\t\tvar localMin = 0;\n\t\tvar valueField = this.cfg.valueField;\n\t\tvar len = this._data.length;\n\n\t\twhile (len--) {\n\t\t\tvar entry = this._data[len];\n\t\t\tvar value = entry[valueField];\n\t\t\tvar latlng = entry.latlng;\n\n\n\t\t\t// we don't wanna render points that are not even on the map ;-)\n\t\t\tif (!bounds.contains(latlng)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// local max is the maximum within current bounds\n\t\t\tlocalMax = Math.max(value, localMax);\n\t\t\tlocalMin = Math.min(value, localMin);\n\n\t\t\tvar point = this._map.latLngToContainerPoint(latlng);\n\t\t\tvar latlngPoint = { x: Math.round(point.x), y: Math.round(point.y) };\n\t\t\tlatlngPoint[valueField] = value;\n\n\t\t\tvar radius;\n\n\t\t\tif (this.cfg.fixedRadius && this.cfg.radiusMeters) {\n\t\t\t\tradius = this._getPixelRadius();\n\t\t\t} else if (entry.radius) {\n\t\t\t\tradius = entry.radius * radiusMultiplier;\n\t\t\t} else {\n\t\t\t\tradius = (this.cfg.radius || 2) * radiusMultiplier;\n\t\t\t}\n\t\t\tlatlngPoint.radius = radius;\n\t\t\tlatLngPoints.push(latlngPoint);\n\t\t}\n\t\tif (this.cfg.useLocalExtrema) {\n\t\t\tgeneratedData.max = localMax;\n\t\t\tgeneratedData.min = localMin;\n\t\t}\n\n\t\tgeneratedData.data = latLngPoints;\n\t\tthis._heatmap.setData(generatedData);\n\t},\n\tsetData: function(data) {\n\t\tthis._max = data.max || this._max;\n\t\tthis._min = data.min || this._min;\n\t\tvar latField = this.cfg.latField || 'lat';\n\t\tvar lngField = this.cfg.lngField || 'lng';\n\t\tvar valueField = this.cfg.valueField || 'value';\n\n\t\t// transform data to latlngs\n\t\tvar data = data.data;\n\t\tvar len = data.length;\n\t\tvar d = [];\n\n\t\twhile (len--) {\n\t\t\tvar entry = data[len];\n\t\t\tvar latlng = new L.LatLng(entry[latField], entry[lngField]);\n\t\t\tvar dataObj = { latlng: latlng };\n\t\t\tdataObj[valueField] = entry[valueField];\n\t\t\tif (entry.radius) {\n\t\t\t\tdataObj.radius = entry.radius;\n\t\t\t}\n\t\t\td.push(dataObj);\n\t\t}\n\t\tthis._data = d;\n\n\t\tthis._draw();\n\t},\n\t// experimential... not ready.\n\taddData: function(pointOrArray) {\n\t\tif (pointOrArray.length > 0) {\n\t\t\tvar len = pointOrArray.length;\n\t\t\twhile(len--) {\n\t\t\t\tthis.addData(pointOrArray[len]);\n\t\t\t}\n\t\t} else {\n\t\t\tvar latField = this.cfg.latField || 'lat';\n\t\t\tvar lngField = this.cfg.lngField || 'lng';\n\t\t\tvar valueField = this.cfg.valueField || 'value';\n\t\t\tvar entry = pointOrArray;\n\t\t\tvar latlng = new L.LatLng(entry[latField], entry[lngField]);\n\t\t\tvar dataObj = { latlng: latlng };\n\n\t\t\tdataObj[valueField] = entry[valueField];\n\t\t\tthis._max = Math.max(this._max, dataObj[valueField]);\n\t\t\tthis._min = Math.min(this._min, dataObj[valueField]);\n\n\t\t\tif (entry.radius) {\n\t\t\t\tdataObj.radius = entry.radius;\n\t\t\t}\n\t\t\tthis._data.push(dataObj);\n\t\t\tthis._draw();\n\t\t}\n\t},\n\t_reset: function () {\n\t\tthis._origin = this._map.layerPointToLatLng(new L.Point(0, 0));\n\n\t\tvar size = this._map.getSize();\n\t\tif (this._width !== size.x || this._height !== size.y) {\n\t\t\tthis._width  = size.x;\n\t\t\tthis._height = size.y;\n\n\t\t\tthis._el.style.width = this._width + 'px';\n\t\t\tthis._el.style.height = this._height + 'px';\n\n\t\t\tthis._heatmap._renderer.setDimensions(this._width, this._height);\n\t\t}\n\t\tthis._draw();\n\t}\n});\n\nHeatBin.CSS_TRANSFORM = (function() {\n\tvar div = document.createElement('div');\n\tvar props = [\n\t\t'transform',\n\t\t'WebkitTransform',\n\t\t'MozTransform',\n\t\t'OTransform',\n\t\t'msTransform'\n\t];\n\n\tfor (var i = 0; i < props.length; i++) {\n\t\tvar prop = props[i];\n\t\tif (div.style[prop] !== undefined) {\n\t\t\treturn prop;\n\t\t}\n\t}\n\treturn props[0];\n})();\n\nexport default function heatBin (options) {\n\treturn new HeatBin(options);\n};\n\n\n"],"names":["HeatBin","L","Layer","Class","extend","initialize","config","cfg","_el","DomUtil","create","_data","_max","_min","container","onAdd","map","size","getSize","_map","_width","x","_height","y","style","width","height","position","_origin","layerPointToLatLng","Point","getPanes","overlayPane","appendChild","_heatmap","h337","on","_reset","_draw","addTo","addLayer","onRemove","removeChild","off","mapPane","point","_leaflet_pos","CSS_TRANSFORM","Math","round","_update","_getPixelRadius","centerLatLng","getCenter","pointC","latLngToContainerPoint","pointX","latLngC","containerPointToLatLng","latLngX","distanceX","distanceTo","pixels","radiusMeters","bounds","zoom","scale","generatedData","max","min","data","getBounds","getZoom","pow","length","setData","latLngPoints","radiusMultiplier","scaleRadius","localMax","localMin","valueField","len","entry","value","latlng","contains","latlngPoint","radius","fixedRadius","push","useLocalExtrema","latField","lngField","d","LatLng","dataObj","addData","pointOrArray","_renderer","setDimensions","div","document","createElement","props","i","prop","undefined","heatBin","options"],"mappings":"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"}